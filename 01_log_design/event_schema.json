{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "QuickPay Event Schema",
  "description": "핀테크 서비스 QuickPay의 이벤트 로그 JSON Schema",
  "type": "object",
  "required": [
    "event_id",
    "event_name",
    "event_timestamp",
    "received_at",
    "session_id",
    "device_id",
    "platform",
    "app_version",
    "event_properties"
  ],
  "properties": {
    "event_id": {
      "type": "string",
      "format": "uuid",
      "description": "이벤트 고유 식별자 (UUID v4)"
    },
    "event_name": {
      "type": "string",
      "enum": [
        "auth_signup_started",
        "auth_signup_submitted",
        "auth_signup_completed",
        "auth_login_attempted",
        "auth_login_completed",
        "auth_identity_verified",
        "payment_transfer_started",
        "payment_transfer_amount_entered",
        "payment_transfer_confirmed",
        "payment_transfer_completed",
        "payment_transfer_failed",
        "payment_charge_completed",
        "payment_withdraw_completed",
        "payment_qr_scanned",
        "payment_qr_completed",
        "product_list_viewed",
        "product_detail_viewed",
        "product_compared",
        "product_applied",
        "product_application_completed",
        "screen_viewed",
        "screen_exited",
        "screen_tab_clicked",
        "screen_banner_clicked",
        "screen_search_performed",
        "system_error_occurred",
        "system_push_received",
        "system_push_clicked"
      ],
      "description": "이벤트명 (택소노미에 정의된 값만 허용)"
    },
    "event_timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "이벤트 발생 시각 (UTC, ISO 8601)"
    },
    "received_at": {
      "type": "string",
      "format": "date-time",
      "description": "서버 수신 시각 (UTC, ISO 8601)"
    },
    "user_id": {
      "type": ["string", "null"],
      "pattern": "^usr_[a-zA-Z0-9]+$",
      "description": "사용자 ID (비로그인 시 null)"
    },
    "session_id": {
      "type": "string",
      "pattern": "^sess_[a-zA-Z0-9]+$",
      "description": "세션 ID"
    },
    "device_id": {
      "type": "string",
      "pattern": "^dev_[a-zA-Z0-9]+$",
      "description": "디바이스 고유 ID"
    },
    "platform": {
      "type": "string",
      "enum": ["ios", "android", "web"],
      "description": "플랫폼"
    },
    "app_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "앱 버전 (Semantic Versioning)"
    },
    "os_version": {
      "type": "string",
      "description": "OS 버전"
    },
    "device_model": {
      "type": "string",
      "description": "디바이스 모델명"
    },
    "event_properties": {
      "type": "object",
      "description": "이벤트별 개별 속성 (이벤트 타입에 따라 상이)"
    }
  },
  "additionalProperties": false
}
